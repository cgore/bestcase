<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bestcase.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bestcase 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="bestcase.core.html"><span>bestcase.core</span></a></li><li><a href="bestcase.for-testing.html"><span>bestcase.for-testing</span></a></li><li><a href="bestcase.store.memory.html"><span>bestcase.store.memory</span></a></li><li><a href="bestcase.store.redis.html"><span>bestcase.store.redis</span></a></li><li><a href="bestcase.util.pretty-print.html"><span>bestcase.util.pretty-print</span></a></li><li><a href="bestcase.util.ring.html"><span>bestcase.util.ring</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="bestcase.core.html#var-Store"><span>Store</span></a></li><li><a href="bestcase.core.html#var-alt"><span>alt</span></a></li><li><a href="bestcase.core.html#var-alt-fns"><span>alt-fns</span></a></li><li><a href="bestcase.core.html#var-end"><span>end</span></a></li><li><a href="bestcase.core.html#var-end-test%21"><span>end-test!</span></a></li><li><a href="bestcase.core.html#var-get-all-active-test-results"><span>get-all-active-test-results</span></a></li><li><a href="bestcase.core.html#var-get-all-active-tests"><span>get-all-active-tests</span></a></li><li><a href="bestcase.core.html#var-get-all-counts"><span>get-all-counts</span></a></li><li><a href="bestcase.core.html#var-get-all-inactive-tests"><span>get-all-inactive-tests</span></a></li><li><a href="bestcase.core.html#var-get-all-scores"><span>get-all-scores</span></a></li><li><a href="bestcase.core.html#var-get-alternative-name"><span>get-alternative-name</span></a></li><li><a href="bestcase.core.html#var-get-config"><span>get-config</span></a></li><li><a href="bestcase.core.html#var-get-count"><span>get-count</span></a></li><li><a href="bestcase.core.html#var-get-test"><span>get-test</span></a></li><li><a href="bestcase.core.html#var-get-user-scored-count"><span>get-user-scored-count</span></a></li><li><a href="bestcase.core.html#var-increment-count%21"><span>increment-count!</span></a></li><li><a href="bestcase.core.html#var-increment-score%21"><span>increment-score!</span></a></li><li><a href="bestcase.core.html#var-increment-user-scored%21"><span>increment-user-scored!</span></a></li><li><a href="bestcase.core.html#var-results"><span>results</span></a></li><li><a href="bestcase.core.html#var-score"><span>score</span></a></li><li><a href="bestcase.core.html#var-set-alternative-name%21"><span>set-alternative-name!</span></a></li><li><a href="bestcase.core.html#var-set-config%21"><span>set-config!</span></a></li><li><a href="bestcase.core.html#var-set-test%21"><span>set-test!</span></a></li><li><a href="bestcase.core.html#var-with-config"><span>with-config</span></a></li><li><a href="bestcase.core.html#var-with-identity"><span>with-identity</span></a></li><li><a href="bestcase.core.html#var-with-identity-and-bot-and-easy-testing"><span>with-identity-and-bot-and-easy-testing</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>bestcase.core documentation</h2><pre class="doc"></pre><div class="public" id="var-Store"><h3>Store</h3><div class="usage"></div><pre class="doc">Abstraction of a store for bestcase tests, counts, scores, etc.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L7">Source</a></div></div><div class="public" id="var-alt"><h3>alt</h3><h4 class="macro">macro</h4><div class="usage"><code>(alt test-name &amp; alternatives-and-options)</code></div><pre class="doc">Takes a test-name and a series of key-value paris, followed by an
option map (optional). The test-name and keys should all be
clojure keywords or vectors [:alternative-name int-weight] for
weighed alternatives.

Example:
(alt :my-test
     :alternative-1 &quot;a1&quot;
     :alternative-2 &quot;a2&quot;
     :alternative-3 &quot;a3&quot;
     {:multiple-participation true})

(alt :my-test
     [:alternative-1 10] &quot;a1&quot;
     [:alternative-2 40] &quot;a2&quot;
     [:alternative-3 50] &quot;a3&quot;
     {:multiple-participation true})

The macro wraps values in anonymous functions, so &quot;a1&quot; becomes
#(&quot;a1&quot;), which are called each and everytime the corresponding
alternative is chosen.

The option map currently only supports one option :multiple-particpation
which determines whether the same identity can be counted more than once
for the test.  It defaults to false.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L116">Source</a></div></div><div class="public" id="var-alt-fns"><h3>alt-fns</h3><div class="usage"><code>(alt-fns test-name alternative-names-and-value-fns)</code><code>(alt-fns test-name alternative-names-and-value-fns options)</code></div><pre class="doc">Does the work of the (alt ...) macro.  It works the same except that its
second argument is a map of key-value pairs where the keys are
clojure keywords (or vectors of [:alternative-name int-weight]) and
the values are functions.

Example:
(alt-fns my-test
         {:alternative-1 #(&quot;a1&quot;)
          :alternative-2 #(&quot;a2&quot;)}
         {:multiple-participation true})</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L152">Source</a></div></div><div class="public" id="var-end"><h3>end</h3><div class="usage"><code>(end test-name alternative-name)</code></div><pre class="doc">Ends test-name with alternative-name as the winner.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L359">Source</a></div></div><div class="public" id="var-end-test%21"><h3>end-test!</h3><div class="usage"><code>(end-test! store test-name)</code></div><pre class="doc">End a test.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-all-active-test-results"><h3>get-all-active-test-results</h3><div class="usage"><code>(get-all-active-test-results)</code></div><pre class="doc">Returns a list of (results ...) for all active (not-ended) tests.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L343">Source</a></div></div><div class="public" id="var-get-all-active-tests"><h3>get-all-active-tests</h3><div class="usage"><code>(get-all-active-tests store)</code></div><pre class="doc">Get the descriptors for all tests that have not been ended.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-all-counts"><h3>get-all-counts</h3><div class="usage"><code>(get-all-counts store test-name)</code></div><pre class="doc">Get the number of times every one of the test's
alternatives have been run.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-all-inactive-tests"><h3>get-all-inactive-tests</h3><div class="usage"><code>(get-all-inactive-tests store)</code></div><pre class="doc">Get the descriptors for all tests that have been ended.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-all-scores"><h3>get-all-scores</h3><div class="usage"><code>(get-all-scores store test-name)</code></div><pre class="doc">Get the scores for all of the test's alternatives.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-alternative-name"><h3>get-alternative-name</h3><div class="usage"><code>(get-alternative-name store test-name i)</code></div><pre class="doc">Get the alternative-name for a test-identity.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-config"><h3>get-config</h3><div class="usage"><code>(get-config)</code></div><pre class="doc">Get the current relevant config.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L64">Source</a></div></div><div class="public" id="var-get-count"><h3>get-count</h3><div class="usage"><code>(get-count store test-name alternative-name)</code></div><pre class="doc">Get the number of times this test-alternative has been run.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-test"><h3>get-test</h3><div class="usage"><code>(get-test store test-name)</code></div><pre class="doc">Get a test's descriptor.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-get-user-scored-count"><h3>get-user-scored-count</h3><div class="usage"><code>(get-user-scored-count store test-name goal-name i)</code></div><pre class="doc">How many times a user scored for a particular test-goal.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-increment-count%21"><h3>increment-count!</h3><div class="usage"><code>(increment-count! store test-name alternative-name)</code></div><pre class="doc">Increment the count of the number of times this test-alternative
has been run.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-increment-score%21"><h3>increment-score!</h3><div class="usage"><code>(increment-score! store test-name alternative-name-and-goal-name)</code></div><pre class="doc">Increment the score for this test-goal-alternative.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-increment-user-scored%21"><h3>increment-user-scored!</h3><div class="usage"><code>(increment-user-scored! store test-name goal-name i)</code></div><pre class="doc">Set that a user scored for a particular test-goal.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-results"><h3>results</h3><div class="usage"><code>(results test-name control-alternative-name)</code></div><pre class="doc">Returns a result map for test-name, where control-alternative-name is
used as the control (base case) for purposes of statistical analysis.

The result map has the following structure:

{:test-name &lt;keyword&gt;
 :test-type :ab-test
 :alternatives [...]}

where the value of the :alternatives key is itself a list of
alternative maps:

{:alternative-name &lt;keyword&gt;
 :count &lt;int&gt;
 :control true ;; optional, only set for control alternative
 :goal-results [...]}

where the value of the :goal-results key is itself a list of
goal maps:

{:goal-name &lt;keyword&gt;
 :score &lt;int&gt;
 :z-score &lt;float&gt;}

The z-score is calculated based on the current control alternative.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L261">Source</a></div></div><div class="public" id="var-score"><h3>score</h3><div class="usage"><code>(score test-name goal-name)</code><code>(score test-name goal-name options)</code></div><pre class="doc">Takes a test-name and a goal-name and tracks a conversion for the
current identity for that test and goal.  You may also pass an
option.

Example:
(score :my-test :purchase)

(score :my-test :purchase {:multiple-participation true})

The option map currently only supports :multiple-participation which
determines whether the same identity can be scored more than once
for the test-goal combination.  It defaults to false.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L225">Source</a></div></div><div class="public" id="var-set-alternative-name%21"><h3>set-alternative-name!</h3><div class="usage"><code>(set-alternative-name! store test-name i alternative-name)</code></div><pre class="doc">Set the alternative-name for a test-identity.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-set-config%21"><h3>set-config!</h3><div class="usage"><code>(set-config! {:keys [store throw-exceptions], :as c})</code></div><pre class="doc">Set the config. The map should have :store -&gt; Store.  The map
may have :throw-exceptions -&gt; boolean that determines whether
bestcase should try to suppress exceptions a bit (but never
totally; use (try ... (catch ...)) if you want guarantees).</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L48">Source</a></div></div><div class="public" id="var-set-test%21"><h3>set-test!</h3><div class="usage"><code>(set-test! store test-name descriptor)</code></div><pre class="doc">Set an active test's descriptor (not per-user) by merging with
the current descriptor.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/#L">Source</a></div></div><div class="public" id="var-with-config"><h3>with-config</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-config config &amp; body)</code></div><pre class="doc">Dynamically set the config for all bestcase function calls within.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L69">Source</a></div></div><div class="public" id="var-with-identity"><h3>with-identity</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-identity i &amp; body)</code></div><pre class="doc">Dynamically set the identity of all bestcase function calls within.
</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L84">Source</a></div></div><div class="public" id="var-with-identity-and-bot-and-easy-testing"><h3>with-identity-and-bot-and-easy-testing</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-identity-and-bot-and-easy-testing i b? et? &amp; body)</code></div><pre class="doc">Dynamically sets the identity of all bestcase function calls within.
Also allows you to set whether the current user is a bot, as well
as the ability to pre-determine (alt ...) choices through the
et (easy-testing) map:
{:test-name-1 :force-alternative-name
 :test-name-2 :force-alternative-name-2
 ...}

You probably shouldn't be using this.</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/core.clj#L89">Source</a></div></div></div></body></html>