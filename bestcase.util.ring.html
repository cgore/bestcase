<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bestcase.util.ring documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bestcase 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="bestcase.core.html"><span>bestcase.core</span></a></li><li><a href="bestcase.for-testing.html"><span>bestcase.for-testing</span></a></li><li><a href="bestcase.store.memory.html"><span>bestcase.store.memory</span></a></li><li><a href="bestcase.store.redis.html"><span>bestcase.store.redis</span></a></li><li><a href="bestcase.util.pretty-print.html"><span>bestcase.util.pretty-print</span></a></li><li class="current"><a href="bestcase.util.ring.html"><span>bestcase.util.ring</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="bestcase.util.ring.html#var-dashboard-routes"><span>dashboard-routes</span></a></li><li><a href="bestcase.util.ring.html#var-default-identity-fn"><span>default-identity-fn</span></a></li><li><a href="bestcase.util.ring.html#var-identity-middleware-wrapper"><span>identity-middleware-wrapper</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>bestcase.util.ring documentation</h2><pre class="doc"></pre><div class="public" id="var-dashboard-routes"><h3>dashboard-routes</h3><div class="usage"><code>(dashboard-routes)</code><code>(dashboard-routes root)</code><code>(dashboard-routes root options)</code></div><pre class="doc">Returns a ring handle that matches the root route (and some children
routes) to display a web-page dashboard of bestcase test results.

The options map can take a list of paths to css files for the :css key
and/or a list of paths to css files for the :js key.

Example:

(dashboard-routes &quot;/bestcase&quot; {:css [&quot;/css/bootstrap.min.css&quot;
                                     &quot;/css/dashboard.css&quot;]
                               :js [&quot;/js/dashboard.js&quot;]})</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/util/ring.clj#L70">Source</a></div></div><div class="public" id="var-default-identity-fn"><h3>default-identity-fn</h3><div class="usage"><code>(default-identity-fn request)</code></div><pre class="doc">Basic identity function that looks in the &quot;bestcase&quot; cookie for a
unique identifier, and if it doesn't find one, generates one using
(java.util.UUID/randomUUID).</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/util/ring.clj#L13">Source</a></div></div><div class="public" id="var-identity-middleware-wrapper"><h3>identity-middleware-wrapper</h3><div class="usage"><code>(identity-middleware-wrapper)</code><code>(identity-middleware-wrapper id-fn)</code><code>(identity-middleware-wrapper id-fn options)</code></div><pre class="doc">Function to create Ring middleware to automatically take care of
setting the appropriate bestcase identity.  Can use a custom identity
function if you want to, e.g., consistently track users from unregistered
to registered. See the bestcase User Guide for more information.

The final form takes both an identity function and an options map which
supports two keys, :simple-no-bots and :easy-testing.

:simple-no-bots =&gt; if true, tries to detect bots through the user-agent
                   header (defaults to false)
:easy-testing =&gt; if true, looks at params in the request map to force
                 chosing a particular alternative; used for testing
                 (defaults to false)</pre><div class="src-link"><a href="https://github.com/jeandenis/bestcase/tree/master/src/bestcase/util/ring.clj#L35">Source</a></div></div></div></body></html>